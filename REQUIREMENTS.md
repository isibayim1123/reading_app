# 英文音読評価アプリケーション 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
Reading App（仮称）

### 1.2 目的
小学生、中学生、高校生を対象とした英文音読練習アプリケーション。学習者が英文を音読し、その発音を自動評価してフィードバックを提供することで、英語学習をサポートする。

### 1.3 対象ユーザー
- **学習者（生徒）**: 小学生、中学生、高校生
- **管理者（先生）**: 生徒の学習履歴を管理・確認する教師

### 1.4 アプリケーション形式
レスポンシブWebアプリケーション（PC、タブレット、スマートフォンのブラウザで利用可能）

---

## 2. 機能要件

### 2.1 ユーザー管理機能

#### 2.1.1 ユーザー登録
- 新規ユーザー登録（メールアドレス、パスワード）
- ユーザー種別の選択（生徒 / 先生）
- 生徒の場合：学年、所属クラス（任意）の登録

#### 2.1.2 認証機能
- ログイン / ログアウト
- パスワードリセット
- セッション管理

#### 2.1.3 プロフィール管理
- プロフィール情報の表示・編集
- 学習統計の表示（総学習時間、達成バッジなど）

### 2.2 英文コンテンツ管理機能

#### 2.2.1 コンテンツ構成
- **テキストの長さ**: 1センテンスから長文まで対応
- **分類軸**:
  - 難易度（小学生レベル、中学生レベル、高校生レベル）
  - 目的（日常会話、大学入試対策、英検対策など）
  - ジャンル（物語、科学、歴史など）

#### 2.2.2 管理者機能
- 英文コンテンツの登録・編集・削除
- お手本音声ファイルのアップロード
- タグ・カテゴリーの設定
- 公開/非公開の設定

#### 2.2.3 学習者機能
- カテゴリー別コンテンツの検索・閲覧
- レベル別フィルタリング
- お気に入り登録

### 2.3 音読練習機能

#### 2.3.1 練習画面
- 英文テキストの表示
- お手本音声の再生機能（再生/停止/速度調整）
- 音読録音ボタン（開始/停止）
- 録音音声の再生機能（自分の音声を聞き返す）
- 再チャレンジボタン

#### 2.3.2 音声認識・評価
- 音声をテキストに変換
- 発音の正確さを評価（単語単位での正誤判定）
- 評価スコアの算出（4段階）

**評価スコア（4段階）の提案**:
| レベル | スコア範囲 | 表示 | 説明 |
|--------|-----------|------|------|
| A | 90-100% | Excellent（素晴らしい！） | ほぼ完璧な発音 |
| B | 75-89% | Good（良くできました！） | 概ね正確な発音 |
| C | 50-74% | Fair（もう少し！） | 改善の余地あり |
| D | 0-49% | Keep Practicing（練習を続けよう！） | 多くの改善が必要 |

#### 2.3.3 フィードバック機能
- **ポジティブフィードバック**:
  - 正しく発音できた単語のハイライト
  - 励ましのメッセージ（「Great job!」「素晴らしい発音です！」など）
  - 前回からの改善点の表示

- **改善提案**:
  - 間違えた単語のハイライト
  - 正しい発音の提示（IPA表記、カタカナ読みなど）
  - 具体的な改善アドバイス（「この単語をもう一度練習してみましょう」など）
  - 類似の練習問題の提案

### 2.4 学習履歴管理機能

#### 2.4.1 個人学習履歴（生徒向け）
- 練習した英文の一覧
- 各練習のスコア履歴（日時、スコア、評価）
- 同じ英文の繰り返し練習の記録
- 苦手な単語の一覧
- 学習時間の記録

#### 2.4.2 クラス管理（先生向け）
- 担当クラス・生徒の管理
- 生徒別の学習履歴閲覧
- 生徒別の進捗状況の確認
- クラス全体の統計データ
- 課題の配信・管理

### 2.5 ゲーミフィケーション機能

#### 2.5.1 バッジシステム
- **学習継続バッジ**:
  - 3日連続、7日連続、30日連続など

- **達成バッジ**:
  - 初めてのExcellent評価
  - 10回練習達成
  - 50回練習達成
  - 特定カテゴリーの完了

- **スキルバッジ**:
  - 発音マスター（特定の難しい単語を正確に発音）
  - スピードリーダー
  - 完璧主義者（3回連続Excellent）

#### 2.5.2 マイルストーン
- **レベルシステム**:
  - 学習時間や練習回数に応じてレベルアップ
  - レベル別の称号（Bronze Reader → Silver Reader → Gold Reader など）

- **目標設定**:
  - 個人目標の設定（週に5回練習など）
  - 目標達成状況の可視化（プログレスバー）

- **ランキング**:
  - クラス内ランキング（任意表示）
  - 月間ベストスコア

### 2.6 その他機能

#### 2.6.1 ダッシュボード
- 今日の学習状況
- おすすめの練習コンテンツ
- 獲得したバッジ
- 次のマイルストーンまでの進捗

#### 2.6.2 通知機能（オプション）
- 学習リマインダー
- バッジ獲得通知
- 先生からのメッセージ

---

## 3. 非機能要件

### 3.1 パフォーマンス
- 音声認識の処理時間: 10秒以内（30秒の音声の場合）
- ページ読み込み時間: 3秒以内
- 同時接続ユーザー数: 最大100ユーザー（初期フェーズ）

### 3.2 セキュリティ
- ユーザー認証の実装（JWT、セッション管理）
- パスワードの暗号化保存
- HTTPS通信の使用
- CORS設定
- XSS、SQLインジェクション対策

### 3.3 ユーザビリティ
- 直感的なUI/UX
- レスポンシブデザイン（モバイルファースト）
- アクセシビリティ対応（WCAG 2.1準拠を目指す）
- 多言語対応（日本語・英語）※将来的に

### 3.4 可用性
- システム稼働率: 99%以上
- 定期的なバックアップ（日次）
- エラーログの記録と監視

### 3.5 拡張性
- ユーザー数の増加に対応可能な設計
- 新しいコンテンツの追加が容易
- 新機能の追加が容易なモジュール設計

---

## 4. 技術スタック（提案）

### 4.1 フロントエンド
- **フレームワーク**: React 18+ with TypeScript
- **UIライブラリ**:
  - Material-UI (MUI) または Tailwind CSS + shadcn/ui
- **状態管理**:
  - React Query（サーバー状態）
  - Zustand（クライアント状態）
- **ルーティング**: React Router v6
- **音声録音**: MediaRecorder API (Web Audio API)
- **ビルドツール**: Vite

### 4.2 バックエンド
- **BaaS**: Supabase
  - PostgreSQL データベース
  - 認証（Supabase Auth）
  - ストレージ（音声ファイル保存）
  - リアルタイム機能（オプション）
  - Row Level Security (RLS)

### 4.3 音声認識・評価
**選択肢**:
1. **Google Cloud Speech-to-Text API**（推奨）
   - 高精度の音声認識
   - 発音評価機能あり
   - 多言語対応

2. **Azure Speech Services**
   - Pronunciation Assessment機能
   - 詳細な発音スコア

3. **Web Speech API**
   - ブラウザ標準API
   - 無料
   - 精度は上記より劣る

**推奨**: Google Cloud Speech-to-Text API（発音評価機能が充実）

### 4.4 ホスティング・デプロイ
- **フロントエンド**: Vercel または Netlify
- **バックエンド**: Supabase（マネージド）
- **CI/CD**: GitHub Actions

### 4.5 開発ツール
- **バージョン管理**: Git / GitHub
- **パッケージマネージャー**: npm または pnpm
- **コード品質**: ESLint, Prettier
- **テスト**: Vitest, React Testing Library

---

## 5. データベース設計（概要）

### 5.1 主要テーブル

#### users（ユーザー）
- id (UUID, PK)
- email (string, unique)
- user_type (enum: 'student', 'teacher')
- full_name (string)
- grade (string, nullable)
- class_id (UUID, FK, nullable)
- created_at (timestamp)
- updated_at (timestamp)

#### classes（クラス）
- id (UUID, PK)
- name (string)
- teacher_id (UUID, FK)
- created_at (timestamp)

#### contents（英文コンテンツ）
- id (UUID, PK)
- title (string)
- text (text)
- difficulty_level (enum: 'elementary', 'junior_high', 'high_school')
- category (string)
- tags (string[])
- audio_url (string)
- is_published (boolean)
- created_by (UUID, FK)
- created_at (timestamp)
- updated_at (timestamp)

#### practice_records（練習記録）
- id (UUID, PK)
- user_id (UUID, FK)
- content_id (UUID, FK)
- audio_recording_url (string)
- transcription (text)
- score (integer, 0-100)
- grade (enum: 'A', 'B', 'C', 'D')
- word_accuracy (jsonb) - 単語ごとの正誤データ
- feedback (jsonb) - フィードバック内容
- practice_count (integer) - 同じコンテンツの練習回数
- created_at (timestamp)

#### badges（バッジマスター）
- id (UUID, PK)
- name (string)
- description (text)
- icon_url (string)
- badge_type (enum: 'streak', 'achievement', 'skill')
- condition (jsonb) - 獲得条件

#### user_badges（ユーザーバッジ）
- id (UUID, PK)
- user_id (UUID, FK)
- badge_id (UUID, FK)
- earned_at (timestamp)

#### milestones（マイルストーン）
- id (UUID, PK)
- user_id (UUID, FK)
- level (integer)
- total_practice_count (integer)
- total_study_time (integer) - 秒数
- updated_at (timestamp)

#### favorites（お気に入り）
- id (UUID, PK)
- user_id (UUID, FK)
- content_id (UUID, FK)
- created_at (timestamp)

---

## 6. 画面設計（概要）

### 6.1 共通
- ヘッダー（ロゴ、ナビゲーション、ユーザーメニュー）
- サイドバー（メインメニュー）
- フッター

### 6.2 認証画面
- ログイン画面
- 新規登録画面
- パスワードリセット画面

### 6.3 生徒用画面
- ダッシュボード
- コンテンツ一覧/検索
- 練習画面
- 結果/フィードバック画面
- 学習履歴
- マイページ（プロフィール、バッジ、マイルストーン）

### 6.4 先生用画面
- クラス管理画面
- 生徒管理画面
- 生徒別学習履歴閲覧
- コンテンツ管理画面
- 統計/レポート画面

---

## 7. 開発フェーズ（提案）

### フェーズ1: MVP（最小実用製品）
- ユーザー認証（生徒のみ）
- 基本的な音読練習機能
- 簡易的な発音評価（Web Speech API）
- 学習履歴の記録

### フェーズ2: コア機能拡張
- 先生アカウント・クラス管理
- 高精度音声認識API導入
- フィードバック機能の充実
- コンテンツ管理機能

### フェーズ3: ゲーミフィケーション
- バッジシステム
- マイルストーン
- ダッシュボードの充実

### フェーズ4: 追加機能
- ランキング
- 通知機能
- レポート機能の強化
- UI/UXの改善

---

## 8. 想定される課題とリスク

### 8.1 技術的課題
- **音声認識精度**:
  - 子供の発音や訛りへの対応
  - 背景ノイズの影響
  - 対策: 高精度APIの選定、ノイズキャンセリング

- **コスト**:
  - 音声認識APIの従量課金
  - ストレージコスト
  - 対策: 使用量の監視、最適化

### 8.2 ユーザビリティ課題
- 学習者のモチベーション維持
- 対策: ゲーミフィケーション、適切なフィードバック

### 8.3 セキュリティ/プライバシー
- 未成年者の個人情報保護
- 音声データの取り扱い
- 対策: 適切な権限管理、データ保持ポリシーの策定

---

## 9. 成功指標（KPI）

- アクティブユーザー数
- 平均練習回数（ユーザーあたり/週）
- ユーザー継続率（7日後、30日後）
- 平均スコアの向上率
- バッジ獲得率
- ユーザー満足度（アンケート）

---

## 10. 今後の検討事項

- [ ] 音声認識APIの選定（コスト・精度の比較）
- [ ] フロントエンドUIライブラリの選定
- [ ] スコアリングアルゴリズムの詳細設計
- [ ] フィードバック生成ロジックの設計
- [ ] バッジ獲得条件の詳細定義
- [ ] プライバシーポリシー・利用規約の作成
- [ ] テスト計画の策定
- [ ] デプロイ・運用計画の策定

---

**作成日**: 2025-11-28
**バージョン**: 1.0
